<div>
<h1 id="new-title"> We want to find your listening history for the past month! </h1>
</div>
<%= form_with scope: :record, url: records_path, id: "record_form", local: true do |f| %>
  <p>
  <%= f.label :username %>
  <%= f.text_field :username, class: "text-box" %>
  </p>

  <p>
    <%= f.select :months, [["7 days", "7day"], ["1 month", "1month"], ["3 months", "3month"], ["6 months", "6month"], ["One year", "12month"]] %>
  </p>

  <p>
    <%= f.select :data_type, [["Artists", "artists"], ["Albums", "albums"], ["Songs", "songs"]] %>
  </p>

  <p>
    <%= f.submit "Let's Go!", class: "submit-button"%>
  </p>
<% end %>

<div class="custom-loader" id="circles-loading""></div>

<script>
  const recordForm = document.getElementById('record_form');
  const usernameBox = document.getElementById('record_username');
  const loader = document.getElementById('circles-loading');
  recordForm.addEventListener("submit", formSubmit);

  function formSubmit() {
    if (usernameBox.value == "") {
      event.preventDefault();
      alert("Please enter a username");
    }
    recordForm.style.display = "none";
    document.getElementById('new-title').style.display = "none";
    loader.style.display = "block";
  }
</script>
